var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,i=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,a=(t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,l=(e,l)=>{for(var r in l||(l={}))t.call(l,r)&&a(e,r,l[r]);if(i)for(var r of i(l))n.call(l,r)&&a(e,r,l[r]);return e};import{p as r,o,c as s,a as d,r as u,b as c,t as p,d as m,e as g,f as h,u as f,g as v,w as y,F as x,h as w,i as b,j as P,k as E,l as k,m as M,n as T,q as L,s as C,v as $}from"./vendor.87af489d.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(i){const n=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((i,l)=>{const r=new URL(e,n);if(self[t].moduleMap[r])return i(self[t].moduleMap[r]);const o=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){l(new Error(`Failed to import: ${e}`)),a(s)},onload(){i(self[t].moduleMap[r]),a(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/assets/");let U=null;async function B(){const e=await fetch("/db.xml"),t=await e.text();return r.parse(t,{ignoreAttributes:!1}).rss}async function D(e){if(!U){const e=await B();U=e.channel}const{item:t}=U,i=t.findIndex((t=>t.guid["#text"]===e));if(-1===i)return!1;const n=t[i],a=i-1,r=i+1,o=a<0?null:t[a].guid["#text"],s=r>t.length-1?null:t[r].guid["#text"];return l(l({},n),{id:n.guid["#text"],channelName:U.title,imageUrl:U.image.url,audio:{length:n.enclosure["@_length"],type:n.enclosure["@_type"],url:n.enclosure["@_url"]},nextEpisode:o,prevEpisode:s})}const S={props:{imageUrl:{type:String,default:""},imageAlt:{type:String,default:""}},setup:e=>({})},I={class:"flex p-5 text-white bg-gradient-to-r from-blue-500 to-green-300 "},N={class:"flex-1 ml-5"};S.render=function(e,t,i,n,a,l){return o(),s("div",I,[d("img",{class:"max-w-lg w-60 h-60 border",alt:i.imageAlt,src:i.imageUrl},null,8,["alt","src"]),d("div",N,[u(e.$slots,"default")])])};const A={props:{imageUrl:{type:String,default:""},title:{type:String,default:""},author:{type:String,default:""},description:{type:String,default:""},createAt:{type:[Date,String],default:""},duration:{type:Number,default:0},audioUrl:{type:String,default:""}},emits:["click"],setup:e=>({createDate:c((()=>{const t=new Date(e.createAt);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`})),showMinutesDuration:c((()=>`${Math.floor(e.duration/60)} 分鐘`))})},_={class:"flex"},j={class:"flex-1 ml-5 flex flex-col justify-center"},z={class:""},O={class:"text-sm text-gray-400"},V={class:"max-h-20 line-clamp-3 max-w-full my-5"},R={class:"text-gray-400"};A.render=function(e,t,i,n,a,l){return o(),s("div",{class:"shadow my-8 p-5 bg-white cursor-pointer hover:shadow-lg transition-all duration-500",onClick:t[1]||(t[1]=t=>e.$emit("click",t))},[d("div",_,[d("img",{src:i.imageUrl,class:"w-14 h-14 border"},null,8,["src"]),d("div",j,[d("h5",z,p(i.title),1),d("div",O,p(i.author),1)])]),d("p",V,p(i.description),1),d("div",R,[d("span",null,p(n.createDate)+" · "+p(n.showMinutesDuration),1)])])};const H={components:{PCover:S,PItem:A},setup(){const e=f(),t=m({title:"",author:"",image:{},items:[],description:""}),i=async()=>{const{title:e,image:i,item:n,description:a,author:l}=await async function(){if(!U){const e=await B();U=e.channel}const{title:e,image:t,item:i,description:n,"itunes:author":a}=U;return{title:e,image:t,item:i,description:n,author:a}}();t.title=e,t.image=i,t.items=n,t.author=l,t.description=a};return g((()=>{i()})),l(l({},h(t)),{toEpisodePage:t=>{e.push(`/episode/${encodeURIComponent(t.guid["#text"])}`)}})}},F={class:"text-2xl font-medium"},X={class:"whitespace-pre-wrap mt-3"},Y={class:"container mx-auto px-5"},q=d("h2",{class:"font-bold text-2xl mt-8"}," 所有集數 ",-1);H.render=function(e,t,i,n,a,l){const r=v("PCover"),u=v("PItem");return o(),s(x,null,[d(r,{title:e.title,description:e.description,"image-url":e.image.url,"image-alt":e.image.title,author:e.author},{default:y((()=>[d("div",null,p(e.author),1),d("div",F,p(e.title),1),d("p",X,p(e.description),1)])),_:1},8,["title","description","image-url","image-alt","author"]),d("div",Y,[q,(o(!0),s(x,null,w(e.items,((t,i)=>(o(),s(u,{key:i,"image-url":e.image.url,title:t.title,author:e.title,description:t.description,"create-at":t.pubDate,duration:t["itunes:duration"],"audio-url":t.link,onClick:e=>n.toEpisodePage(t)},{default:y((()=>[b(p(t),1)])),_:2},1032,["image-url","title","author","description","create-at","duration","audio-url","onClick"])))),128))])],64)};const G={props:{showPause:{type:Boolean,default:!1},color:{type:String,default:"#000"},width:{type:String,default:"24px"},height:{type:String,default:"24px"}}},J=d("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),K=d("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1),Q=d("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),W=d("path",{d:"M10 8.64L15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"},null,-1);G.render=function(e,t,i,n,a,l){return o(),s("div",{style:{height:i.height,width:i.width}},[i.showPause?(o(),s("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",height:i.height,width:i.width,viewBox:"0 0 24 24",fill:i.color},[J,K],8,["height","width","fill"])):(o(),s("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",height:i.height,width:i.width,viewBox:"0 0 24 24",fill:i.color},[Q,W],8,["height","width","fill"]))],4)};const Z={props:{icon:{type:Boolean,default:!1},fab:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup:e=>({getClasses:()=>{let t="";return e.fab&&(t+="rounded-full p-1 bg-white border transform hover:scale-110 transition transition-transform "),e.icon&&(t+="rounded-full p-1 transform "),t.split(" ")}})};Z.render=function(e,t,i,n,a,l){return o(),s("button",{disabled:i.disabled,class:["p-btn focus:outline-none",n.getClasses()]},[u(e.$slots,"default")],10,["disabled"])};const ee={components:{PCover:S,PlayIcon:G,PBtn:Z},setup(){const e=E(),t=m({title:"",description:"",channelName:"",imageUrl:"",createAt:"null",duration:0,author:"",audio:{},id:"",nextEpisode:"",prevEpisode:""}),i=k("audio"),n=async()=>{const{id:i}=e.params,n=await D(i);t.id=n.id,t.title=n.title,t.description=n.description,t.channelName=n.channelName,t.imageUrl=n.imageUrl,t.createAt=n.pubDate,t.duration=n["itunes:duration"],t.author=n["itunes:author"],t.audio=n.audio,t.nextEpisode=n.nextEpisode,t.prevEpisode=n.prevEpisode},a=c((()=>{const e=new Date(t.createAt);return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`})),r=c((()=>`${Math.floor(t.duration/60)} 分鐘`)),o=c((()=>i.nowPlayingId===t.id)),s=c((()=>{const e=i.nowPlayingId===t.id;return i.isPlaying&&e}));return P((()=>e.params),(()=>{n()})),g((()=>{n()})),l(l({},h(t)),{createDate:a,showMinutesDuration:r,play:e=>{o.value?i.isPlaying=!i.isPlaying:(i.url=e.url,i.cover=t.imageUrl,i.title=t.title,i.subTitle=t.channelName,i.nowPlayingId=t.id,i.nextEpisode=t.nextEpisode,i.prevEpisode=t.prevEpisode)},canPlay:s})}},te={class:"flex flex-col h-full"},ie={class:"text-6xl font-medium"},ne={class:"mt-auto"},ae={class:"text-sm mt-3"},le={class:"container mx-auto px-5"},re=d("h2",{class:"font-bold text-2xl mt-8"}," 本集介紹 ",-1),oe={class:"whitespace-pre-wrap "};ee.render=function(e,t,i,n,a,l){const r=v("PlayIcon"),u=v("PBtn"),c=v("PCover");return o(),s(x,null,[d(c,{"image-url":e.imageUrl},{default:y((()=>[d("div",te,[d("div",ie,p(e.title),1),d("div",ne,[d(u,{fab:""},{default:y((()=>[d(r,{width:"2rem",height:"2rem","show-pause":n.canPlay,onClick:t[1]||(t[1]=t=>n.play(e.audio))},null,8,["show-pause"])])),_:1}),d("div",ae,p(e.channelName)+" - "+p(e.author),1),d("div",null,p(n.createDate)+" · "+p(n.showMinutesDuration),1)])])])),_:1},8,["image-url"]),d("div",le,[re,d("p",oe,p(e.description),1)])],64)};const se=[{path:"/",name:"channel",component:H},{path:"/episode/:id",name:"episode",component:ee}],de=M({history:T(),scrollBehavior:(e,t,i)=>"channel"===e.name?i:{left:0,top:0},routes:se});const ue={name:"PSlider",inheritAttrs:!1,props:{min:{type:Number,default:0},max:{type:Number,default:100},value:{type:Number,default:50}},emits:["input","dragstart","dragging","dragend"],setup(e,{emit:t}){let i=!1,n=0,a=0,l=0;const r=e=>{if(!i)return!1;i=!1,t("dragend",e)},o=c((()=>e.value/(e.max-e.min)*100)),s=(t,i)=>Math.round(t/i*e.max),d=t=>(t=Math.max(e.min,t),t=Math.min(e.max,t)),u=e=>{if(!i)return!1;const r=e.clientX-n,o=d(s(a+r,l));t("input",o),t("dragging",e)};return g((()=>{document.addEventListener("mousemove",u),document.addEventListener("mouseup",r)})),L((()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",r)})),{precent:o,mousedown:e=>{e.preventDefault();const{width:r}=e.currentTarget.getBoundingClientRect();l=r,i=!0,n=e.clientX,a=e.clientX-e.currentTarget.offsetLeft;const o=d(s(a,l));t("input",o),t("dragstart",e)}}}},ce={class:"rounded shadow bg-white relative h-1 flex-1"},pe=d("div",{class:"hidden group-hover:block h-3 w-3 rounded-full bg-blue-500 absolute shadow-2xl transform -translate-y-2/4 top-2/4 translate-x-2/4 right-0 cursor-pointer hover-target"},null,-1);ue.render=function(e,t,i,n,a,l){return o(),s("div",{class:"h-5 w-full flex items-center cursor-pointer group",draggable:"",onMousedown:t[1]||(t[1]=(...e)=>n.mousedown&&n.mousedown(...e))},[d("div",ce,[d("div",{class:"h-full bg-blue-400 rounded relative",style:{width:`${n.precent}%`}},[pe],4)])],32)};const me={components:{PSlider:ue,PlayIcon:G,PBtn:Z},props:{hasPrev:{type:Boolean,default:!1},hasNext:{type:Boolean,default:!1},audioElement:{type:Audio,default:null},url:{type:String,default:""},cover:{type:String,default:""},isPlaying:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},title:{type:String,default:""},subTitle:{type:String,default:""},currentTime:{type:Number,default:0},fixed:{type:Boolean,default:!1}},emits:["update:isPlaying","update:url","update:currentTime","update:visible","click:prev","click:next","click:info","ended","click:cover"],setup(e,{emit:t}){let i,n=!1;const a=m({played:0,loaded:0,duration:0,isLoading:!1}),r=()=>{a.duration=i.duration},o=()=>{t("update:visible",!0)},s=e=>{a.played=i.currentTime/i.duration,a.isLoading=!1,n||t("update:currentTime",i.currentTime)},d=e=>{t("ended",e)},u=c((()=>{const t=Math.floor(e.currentTime);return p(t)})),p=e=>{const t=Math.floor(e/60/60),i=Math.floor(e/60),n=e%60;let a="";return a+=t>0?t:"",a+=i>0?i<10?`0${i}`:i:"00",a+=":",a+=n>0?n<10?`0${n}`:n:"00",a},f=c((()=>{const t=Math.floor(a.duration)-Math.floor(e.currentTime);return p(t)}));P((()=>e.url),(e=>{i.src=e,i.currentTime=0,a.isLoading=!0,o(),i.play(),t("update:url",e),t("update:isPlaying",!0)})),P((()=>e.isPlaying),(e=>{e?i.play():i.pause()}));return g((()=>{i=e.audioElement||new Audio,i.addEventListener("loadedmetadata",r),i.addEventListener("loadeddata",o),i.addEventListener("timeupdate",s),i.addEventListener("ended",d)})),L((()=>{i.removeEventListener("loadedmetadata",r),i.removeEventListener("loadeddata",o),i.removeEventListener("timeupdate",s),i.removeEventListener("ended",d)})),l({toggleAudioPlayState:()=>{const i=e.isPlaying;t("update:isPlaying",!i)},dragend:t=>{var l;n&&(l=e.currentTime,i.currentTime=l-.1,a.isLoading=!0,n=!1)},playedTime:u,restTime:f,dragstart:()=>{n=!0}},h(a))}},ge={class:"truncate"},he={class:"text-xs text-gray-400 truncate"},fe={class:"flex-1 flex flex-col justify-center"},ve={class:"w-7/12 mx-auto"},ye={class:"flex"},xe=d("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},[d("path",{d:"M0 0h24v24H0V0z",fill:"none"}),d("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6l-8.5 6zm6.5 2.14L12.97 12 16 9.86v4.28z"})],-1),we=d("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},[d("path",{d:"M0 0h24v24H0V0z",fill:"none"}),d("path",{d:"M6 18l8.5-6L6 6v12zm2-8.14L11.03 12 8 14.14V9.86zM16 6h2v12h-2z"})],-1),be={class:"w-full flex items-center"},Pe={class:"mr-3 text-gray-500 w-14 text-right text-sm"},Ee={class:"ml-3 w-14 text-gray-500 text-sm"};me.render=function(e,t,i,n,a,l){const r=v("PBtn"),u=v("PlayIcon"),c=v("PSlider");return o(),s("div",{class:["bottom-0 w-full bg-blue-50 border-t h-20 flex",{hidden:!i.visible,fixed:i.fixed}]},[d("img",{src:i.cover,class:"h-full cursor-pointer",onClick:t[1]||(t[1]=t=>e.$emit("click:cover"))},null,8,["src"]),d("div",{class:"flex flex-col h-full justify-center mx-5 text-sm w-48 cursor-pointer",onClick:t[2]||(t[2]=t=>e.$emit("click:info"))},[d("div",ge,p(i.title),1),d("div",he,p(i.subTitle),1)]),d("div",fe,[d("div",ve,[d("div",ye,[d(r,{icon:"",disabled:!i.hasNext,onClick:t[3]||(t[3]=t=>e.$emit("click:next"))},{default:y((()=>[xe])),_:1},8,["disabled"]),d(r,{fab:"",class:"mx-auto",onClick:n.toggleAudioPlayState},{default:y((()=>[d(u,{"show-pause":i.isPlaying},null,8,["show-pause"])])),_:1},8,["onClick"]),d(r,{disabled:!i.hasPrev,icon:"",onClick:t[4]||(t[4]=t=>e.$emit("click:prev"))},{default:y((()=>[we])),_:1},8,["disabled"])]),d("div",be,[d("span",Pe,p(n.playedTime),1),d(c,{value:i.currentTime,max:e.duration,onInput:t[5]||(t[5]=t=>e.$emit("update:currentTime",t)),onDragstart:n.dragstart,onDragend:n.dragend},null,8,["value","max","onDragstart","onDragend"]),d("span",Ee,p(n.restTime),1)])])])],2)};const ke={components:{PPlayer:me},setup(){const e=f(),t=m({isPlaying:!1,url:"",cover:"",title:"",subTitle:"",currentTime:0,visible:!1,nowPlayingId:"",audioElement:new Audio,nextEpisode:"",prevEpisode:""});C("audio",t);const i=c((()=>null!==t.prevEpisode)),n=c((()=>null!==t.nextEpisode)),a=async e=>{const i=await D(e);t.nowPlayingId=i.id,t.title=i.title,t.description=i.description,t.channelName=i.channelName,t.imageUrl=i.imageUrl,t.createAt=i.pubDate,t.duration=i["itunes:duration"],t.author=i["itunes:author"],t.audio=i.audio,t.nextEpisode=i.nextEpisode,t.prevEpisode=i.prevEpisode,t.url=i.audio.url};return l(l({},h(t)),{toEpisodeById:a,hasPrev:i,hasNext:n,toEpisodePage:()=>{e.push(`/episode/${t.nowPlayingId}`)},toPrevEpisode:e=>{i.value?a(t.prevEpisode):t.isPlaying=!1},toChannelPage:()=>{e.push("/")}})}},Me={class:"bg-gray-50 pb-40 min-h-screen"};ke.render=function(e,t,i,n,a,l){const r=v("router-view"),u=v("PPlayer");return o(),s("div",Me,[d(r),d(u,{isPlaying:e.isPlaying,"onUpdate:isPlaying":t[1]||(t[1]=t=>e.isPlaying=t),url:e.url,"onUpdate:url":t[2]||(t[2]=t=>e.url=t),currentTime:e.currentTime,"onUpdate:currentTime":t[3]||(t[3]=t=>e.currentTime=t),visible:e.visible,"onUpdate:visible":t[4]||(t[4]=t=>e.visible=t),"audio-element":e.audioElement,cover:e.cover,title:e.title,"sub-title":e.subTitle,"has-next":n.hasNext,"has-prev":n.hasPrev,fixed:"","onClick:info":n.toEpisodePage,"onClick:prev":t[5]||(t[5]=t=>n.toEpisodeById(e.prevEpisode)),"onClick:next":t[6]||(t[6]=t=>n.toEpisodeById(e.nextEpisode)),"onClick:cover":t[7]||(t[7]=e=>n.toChannelPage()),onEnded:n.toPrevEpisode},null,8,["isPlaying","url","currentTime","visible","audio-element","cover","title","sub-title","has-next","has-prev","onClick:info","onEnded"])])};$(ke).use(de).mount("#app");
